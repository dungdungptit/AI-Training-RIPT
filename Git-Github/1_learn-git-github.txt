GIT Version Control System [GVCS]
`````````````````````````````````
Git Ä‘Æ°á»£c táº¡o ra bá»Ÿi Linus Torvalds nháº±m phá»¥c vá»¥ phÃ¡t triá»ƒn Linux Kernel.

Git lÃ  gÃ¬?
Git lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (version control system).

Git cho phÃ©p "lÆ°u" láº¡i tráº¡ng thÃ¡i chÃ­nh xÃ¡c cá»§a cÃ¡c tá»‡p vÃ  quay láº¡i tráº¡ng thÃ¡i Ä‘Ã³ báº¥t cá»© lÃºc nÃ o náº¿u phÃ¡t hiá»‡n sai sÃ³t trong quÃ¡ trÃ¬nh thay Ä‘á»•i.

Khi cÃ¡c nhÃ  phÃ¡t triá»ƒn lÃ m viá»‡c trÃªn má»™t dá»± Ã¡n, mÃ£ nguá»“n sáº½ liÃªn tá»¥c Ä‘Æ°á»£c thay Ä‘á»•i Ä‘á»ƒ Ä‘Ã¡p á»©ng yÃªu cáº§u cá»§a dá»± Ã¡n.

Tuy nhiÃªn, Ä‘Ã´i khi cáº§n quay láº¡i kiá»ƒm tra cÃ¡c phiÃªn báº£n mÃ£ nguá»“n trÆ°á»›c Ä‘Ã³.

 
 
 
 
CÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n
MÃ£ nguá»“n cá»¥c bá»™
ÄÃ¢y lÃ  cÃ´ng viá»‡c thá»±c hiá»‡n trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n. Báº¥t ká»³ chá»‰nh sá»­a, Ä‘á»‹nh dáº¡ng, tÃ­nh nÄƒng hoáº·c cÃ´ng viá»‡c phÃ¡t triá»ƒn nÃ o trÃªn mÃ¡y tÃ­nh Ä‘á»u Ä‘Æ°á»£c gá»i lÃ  mÃ£ nguá»“n cá»¥c bá»™.

Khu vá»±c staging
Khi Ä‘Ã£ hÃ i lÃ²ng vá»›i cÃ¡c thay Ä‘á»•i hoáº·c khá»‘i lÆ°á»£ng cÃ´ng viá»‡c Ä‘Ã£ hoÃ n thÃ nh, cÃ³ thá»ƒ Ä‘Ã¡nh dáº¥u chÃºng lÃ  Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ staging. Äiá»u nÃ y nghÄ©a lÃ  cÃ¡c dÃ²ng mÃ£ nÃ y Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ Ä‘Æ°á»£c commit.

MÃ¡y chá»§
Khi Ä‘Ã£ sáºµn sÃ ng vá»›i cÃ¡c tá»‡p trong khu vá»±c staging, cÃ³ thá»ƒ gá»­i chÃºng lÃªn mÃ¡y chá»§ nÆ¡i lÆ°u trá»¯ toÃ n bá»™ mÃ£ nguá»“n Ä‘á»ƒ nhá»¯ng ngÆ°á»i khÃ¡c cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng. LÃºc nÃ y, cÃ¡c tá»‡p cÃ³ thá»ƒ Ä‘Æ°á»£c ngÆ°á»i khÃ¡c xem vÃ  chá»‰nh sá»­a.
 
Táº¡i sao cáº§n lÃ m nhá»¯ng Ä‘iá»u trÃªn vá» git
âš« Kiá»ƒm tra xem phiÃªn báº£n trÆ°á»›c cÃ³ hoáº¡t Ä‘á»™ng tá»‘t hÆ¡n khÃ´ng.
âš« XÃ¡c Ä‘á»‹nh nhá»¯ng thay Ä‘á»•i Ä‘Ã£ Ä‘Æ°á»£c thá»±c hiá»‡n vÃ  thá»i Ä‘iá»ƒm chÃºng xáº£y ra.
âš« PhÃ¡t hiá»‡n vÃ  xÃ¡c Ä‘á»‹nh lá»—i.

âœ… Git há»— trá»£ theo dÃµi vÃ  quáº£n lÃ½ táº¥t cáº£ cÃ¡c thay Ä‘á»•i nÃ y.

 



GitHub lÃ  gÃ¬?
GitHub lÃ  má»™t ná»n táº£ng cho phÃ©p lÆ°u trá»¯ lá»‹ch sá»­ phiÃªn báº£n trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y.

Sá»± khÃ¡c biá»‡t giá»¯a Git vÃ  GitHub
ğŸ”· Git lÃ  má»™t cÃ´ng cá»¥ há»— trá»£ theo dÃµi vÃ  quáº£n lÃ½ táº¥t cáº£ cÃ¡c thay Ä‘á»•i Ä‘Ã£ thá»±c hiá»‡n theo thá»i gian.
ğŸ”· Git Ä‘Æ°á»£c cháº¡y vÃ  quáº£n lÃ½ trÃªn há»‡ thá»‘ng cá»¥c bá»™.

Trong khi Ä‘Ã³:

ğŸ”· GitHub lÃ  má»™t trang web Ä‘á»ƒ lÆ°u trá»¯ dá»± Ã¡n dÆ°á»›i dáº¡ng kho lÆ°u trá»¯ (repositories) cá»§a Git.
ğŸ”· GitHub hoÃ n toÃ n dá»±a trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y.
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


CÃ¡c lá»‡nh git cÆ¡ báº£n:
```````
CÃ i Ä‘áº·t Git:
````````
# apt install git -y
 
Kiá»ƒm tra phiÃªn báº£n:
``````````````
# git --version

Cáº¥u hÃ¬nh Git vá»›i tÃªn ngÆ°á»i dÃ¹ng vÃ  email
Khi báº¯t Ä‘áº§u sá»­ dá»¥ng Git, cáº§n thiáº¿t láº­p tÃªn ngÆ°á»i dÃ¹ng vÃ  Ä‘á»‹a chá»‰ email:
 
# git config --global user.name "username"
# git config --global user.email "username@email.com"
# git config --global --list
OR
# git config --global -l
 
XÃ³a cáº¥u hÃ¬nh Ä‘Ã£ thiáº¿t láº­p
Sá»­ dá»¥ng tÃ¹y chá»n --unset Ä‘á»ƒ xÃ³a má»™t thiáº¿t láº­p:
```````````````````````````````````````````
# git config --unset --global user.email
 
Sao chÃ©p kho lÆ°u trá»¯ tá»« GitHub
```````````````````````````````````````````
# git clone https://githib.com/account_name/repo.git
# cd repo/
# ls -a
.git
 
Khá»Ÿi táº¡o má»™t kho lÆ°u trá»¯ Git trong thÆ° má»¥c hiá»‡n táº¡i
````````````````
# mkdir dir
# cd dir
# git init

Kiá»ƒm tra thÆ° má»¥c .git
# ls -a
.git/
 
ThÃªm tá»‡p vÃ o khu vá»±c staging
# git add .
OR
# git add FILENAME
 
 
 
Xem thiáº¿t láº­p cá»¥ thá»ƒ cá»§a kho lÆ°u trá»¯
```````````````````````````````````````````````
# cat .git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[remote "var_name"]
        url = https://github.com/dungdungptit
/rce.git
        fetch = +refs/heads/*:refs/remotes/var_name/*
 
 
Táº¡o má»™t nhÃ¡nh má»›i:
````````````````
# git checkout -b first
-b: branch name
 
[ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chuyá»ƒn vÃ  táº¡o má»™t nhÃ¡nh má»›i]
 
Chuyá»ƒn sang nhÃ¡nh khÃ¡c
````````````````
# git checkout first
 
Liá»‡t kÃª cÃ¡c nhÃ¡nh hiá»‡n táº¡i:
`````````````
# git branch
 
Liá»‡t kÃª cÃ¡c nhÃ¡nh tá»« xa
`````````````````````
# git branch -a
 
 
 
 
 
Thao tÃ¡c vá»›i Git

ThÃªm ná»™i dung vÃ o tá»‡p readme.md
---
# cat >> readme.md
llll

Kiá»ƒm tra sá»± khÃ¡c biá»‡t (diff)
---
# git diff
diff --git a/readme.md b/readme.md
index 039727e..11d14ae 100644
--- a/readme.md
+++ b/readme.md
@@ -1 +1,2 @@
 lol
+llll


ThÃªm tá»‡p vÃ o khu vá»±c staging
````````````````
# git add readme.md
 
OR

# git add .
 
 
Commit thay Ä‘á»•i
# git commit -m "lol1"
[first 835e51c] lol1
 1 file changed, 1 insertion(+)
 
 
 
 

Há»£p nháº¥t (merge) nhÃ¡nh 'test' vÃ o nhÃ¡nh 'main':
````````````````````````````````````````
# git checkout main
# git merge test 
 
 
Xem lá»‹ch sá»­ cÃ¡c commit
````````````````````
# git log
 
 
 
 
 
 
 
 
 
Xem cÃ¡c nhÃ¡nh vá»›i show-branch
```````````
# git show-branch
``````````````````````````````````````````````````````````````````
 


Äáº©y commit lÃªn kho lÆ°u trá»¯ Git tá»« xa
```````````````````````````````
1. Thiáº¿t láº­p tÃªn vÃ  email
```````````````````````
# git config --global user.name "Your Name"
# git config --global user.email "your_email@whatever.com"
 
# mkdir hello
# cd hello
 
 
# git clone URL

Ná»™i dung tá»‡p hello.py
# cat > hello.py

#!/usr/bin/python3
print("Hello, World")
 
2. Kiá»ƒm tra tráº¡ng thÃ¡i cá»§a kho lÆ°u trá»¯ (repository)
`````````````````````````````````````
Sá»­ dá»¥ng lá»‡nh git status Ä‘á»ƒ kiá»ƒm tra tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a kho lÆ°u trá»¯
 
# git status
 
 
3. ThÃªm vÃ  commit thay Ä‘á»•i
``````````````
 
# git add hello.py
# git status
# git commit -m "Changes hello"
 
Xem lá»‹ch sá»­ cÃ¡c thay Ä‘á»•i báº±ng lá»‡nh --git log-- Ä‘á»ƒn láº¥y danh sÃ¡ch nhá»¯ng thay Ä‘á»•i Ä‘Ã£ Ä‘Æ°á»£c thá»±c hiá»‡n .
 
# git log
 
Hiá»ƒn thá»‹ lá»‹ch sá»­ trÃªn má»™t dÃ²ng
`````````````````````
# git log --pretty=oneline
 
Äiá»u chá»‰nh lá»‹ch sá»­ hiá»ƒn thá»‹
````````````````````````````````````````
# git log --pretty=oneline --max-count=2
# git log --pretty=oneline --since='5 minutes ago'
# git log --pretty=oneline --until='5 minutes ago'
# git log --pretty=oneline --author=<your name>
# git log --pretty=oneline --all
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
``````````````````````````````````````````````````````````````````
Quy trÃ¬nh lÃ m viá»‡c vá»›i kho lÆ°u trá»¯ cÃ´ng khai (Public Repo Workflow)

````````````````````
1. Táº¡o kho lÆ°u trá»¯ cÃ´ng khai/riÃªng tÆ° trÃªn GitHub:
 
https://github.com/dungdungptit/DevOps-Demo
 
2. Sao chÃ©p kho lÆ°u trá»¯ vá» mÃ¡y (clone):
 
# git clone https://github.com/dungdungptit/DevOps-Demo.git
 
3. Táº¡o má»™t nhÃ¡nh má»›i:
 
# git checkout "test"
# git branch
 
4. Thá»±c hiá»‡n thay Ä‘á»•i trÃªn nhÃ¡nh 'test':

ThÃªm ná»™i dung vÃ o tá»‡p README.md
# cat >> README.md
 
LOL

Táº¡o tá»‡p index.html vá»›i ná»™i dung
# cat > index.html
<h1>ulala</h1>

ThÃªm táº¥t cáº£ cÃ¡c thay Ä‘á»•i vÃ o staging
# git add .

Kiá»ƒm tra tráº¡ng thÃ¡i vÃ  commit thay Ä‘á»•i
# git status
# git commit -m "Home web page in test branch"
 
5. Há»£p nháº¥t nhÃ¡nh 'test' vÃ o nhÃ¡nh 'main':
`
# git checkout main
# git merge test
 
6. ThÃªm kho lÆ°u trá»¯ tá»« xa (remote):
`
# git remote add origin https://github.com/dungdungptit/DevOps-Demo.git

Xem thÃ´ng tin trong tá»‡p cáº¥u hÃ¬nh Git
# cat .git/config
 
7. Táº¡o token truy cáº­p cÃ¡ nhÃ¢n (Personal Access Token):
````````````````````
Settings --> Developer Settings --> Personal Access Token --> Generate New Token

token_generated

LÆ°u trá»¯ thÃ´ng tin xÃ¡c thá»±c
# git config --global credential.helper store
 
 
8. Äáº©y dá»¯ liá»‡u lÃªn kho lÆ°u trá»¯ tá»« xa:
``
# git push -u origin main

Khi Ä‘Æ°á»£c yÃªu cáº§u nháº­p tÃ i khoáº£n
username: (TÃªn tÃ i khoáº£n GitHub): 
password: (Token truy cáº­p cÃ¡ nhÃ¢n Ä‘Ã£ táº¡o á»Ÿ bÆ°á»›c 7) token_generated
 
.git/
ThÆ° má»¥c .git/ chá»©a cÃ¡c tá»‡p liÃªn quan Ä‘áº¿n kho lÆ°u trá»¯ Git
 



 
Cáº¥u trÃºc bÃªn trong Git (Git Internals):
--------------
Táº¡i thÆ° má»¥c .git
Liá»‡t kÃª ná»™i dung trong thÆ° má»¥c .git
 
# ls .git
 
Kho lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng (Object Store)
`````````````````
# ls .git/objects
 
Táº¡i Ä‘Ã¢y sáº½ tháº¥y nhiá»u thÆ° má»¥c cÃ³ tÃªn gá»“m 2 kÃ½ tá»±.
TÃªn thÆ° má»¥c lÃ  2 kÃ½ tá»± Ä‘áº§u tiÃªn trong hash SHA1 cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c lÆ°u trá»¯ trong Git.
 
KhÃ¡m phÃ¡ sÃ¢u hÆ¡n vá» kho lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng
````````````````````````````
# ls -C .git/objects/<dir>
 
- Trong cÃ¡c thÆ° má»¥c cÃ³ 2 kÃ½ tá»± nÃ y, sáº½ xuáº¥t hiá»‡n cÃ¡c tá»‡p cÃ³ tÃªn dÃ i 38 kÃ½ tá»±. 
- ÄÃ¢y lÃ  nhá»¯ng tá»‡p chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c lÆ°u trá»¯ trong Git. 
- CÃ¡c tá»‡p nÃ y Ä‘Æ°á»£c nÃ©n vÃ  mÃ£ hÃ³a, do Ä‘Ã³ khÃ´ng thá»ƒ Ä‘á»c trá»±c tiáº¿p ná»™i dung cá»§a chÃºng vÃ  viá»‡c xem trá»±c tiáº¿p ná»™i dung cá»§a chÃºng sáº½ khÃ´ng há»¯u Ã­ch láº¯m, nhÆ°ng chÃºng ta sáº½ xem xÃ©t ká»¹ hÆ¡n sau Ä‘Ã¢y.
 
Táº¡i tá»‡p cáº¥u hÃ¬nh (Config File)
```````````
Hiá»ƒn thá»‹ ná»™i dung tá»‡p cáº¥u hÃ¬nh
# cat .git/config
 
- ÄÃ¢y lÃ  tá»‡p cáº¥u hÃ¬nh cá»¥ thá»ƒ cá»§a tá»«ng dá»± Ã¡n.
 
NhÃ¡nh vÃ  tháº» (Branches and Tags)
`````````````````
Liá»‡t kÃª nhÃ¡nh vÃ  tháº»
# ls .git/refs
# ls .git/refs/heads
# ls .git/refs/tags

Kiá»ƒm tra ná»™i dung cá»§a má»™t tháº» cá»¥ thá»ƒ
# cat .git/refs/tags/v1
 
Má»—i tá»‡p Ä‘áº¡i diá»‡n cho má»™t tháº» Ä‘Æ°á»£c táº¡o báº±ng lá»‡nh git tag. 
Ná»™i dung cá»§a tá»‡p lÃ  hash cá»§a commit gáº¯n liá»n vá»›i tháº» Ä‘Ã³.
 
 
Tá»‡p HEAD
Hiá»ƒn thá»‹ ná»™i dung cá»§a tá»‡p HEAD
`````````````
# cat .git/HEAD
 
Tá»‡p HEAD chá»©a tham chiáº¿u Ä‘áº¿n nhÃ¡nh hiá»‡n táº¡i.
 
 
TrÃ­ch xuáº¥t commit má»›i nháº¥t (Dumping the Latest Commit)
`````````````````````````
# git hist --all [not working now]
 
Sá»­ dá»¥ng hash SHA1 tá»« commit Ä‘Æ°á»£c liá»‡t kÃª á»Ÿ trÃªn Ä‘á»ƒ xem cÃ¡c thÆ° má»¥c bÃªn trong.
 
# git cat-file -t <hash>
# git cat-file -p <hash>
 
git log -> cÃ¡c tráº¡ng thÃ¡i cá»§a project
git cat vÃ o 1 cÃ¡i log -> commit cÃ³ nhá»¯ng file nÃ o, tráº¡ng thÃ¡i nÃ o

 
TÃ¬m cÃ¢y thÆ° má»¥c (Tree)
````````````````
- TrÃ­ch xuáº¥t cÃ¢y thÆ° má»¥c Ä‘Æ°á»£c tham chiáº¿u trong commit. 
- ÄÃ¢y sáº½ lÃ  mÃ´ táº£ vá» cÃ¡c tá»‡p má»›i nháº¥t nháº¥t trong dá»± Ã¡n (táº¡i thá»i Ä‘iá»ƒm commit Ä‘Ã³). 
- Sá»­ dá»¥ng hash SHA1 tá»« dÃ²ng â€œtreeâ€ Ä‘Ã£ liá»‡t kÃª á»Ÿ trÃªn.
 
# git cat-file -p <treehash>
100644 blob 28e0e9d6ea7e25f35ec64a43fe8386f90	Rakefile
040000 tree e46f374f5b36c6f02fb379044f754d795	lib
 
 
 
TrÃ­ch xuáº¥t thÆ° má»¥c lib (Dumping the lib directory)
`````````````````````````
# git cat-file -p <libhash>
 
100644 blob c45f26b6779fc4c385d9d24fc12cf72	hello.rb
 
TrÃ­ch xuáº¥t tá»‡p hello.rb (Dumping the hello.rb file)
``````````````````````````
# git cat-file -p <rbhash>
 
# Default is World
# Author: Jim Weirich (jim@somewhere.com)
name = ARGV.first || "World"
 
puts "Hello, #{name}!"
-----------
 
 
CÃ¡ch thá»§ cÃ´ng Ä‘á»ƒ trÃ­ch xuáº¥t ná»™i dung cá»§a blob:
``````````````````````````````````````
Liá»‡t kÃª lá»‹ch sá»­
# git log --pretty=oneline
or
# git log --stat --pretty=oneline

Hiá»ƒn thá»‹ thÃ´ng tin cá»¥ thá»ƒ cá»§a commit
# git show ab35d03c8f4f238fd94f0ec3abd533dbe0b5a352

Liá»‡t kÃª táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ  kiá»ƒm tra ná»™i dung blob
# git cat-file --batch-check --batch-all-objects | grep blob
# git cat-file -p HASH
 

TrÃ­ch xuáº¥t cÃ¡c thÃ´ng tin cá»¥ thá»ƒ (vÃ­ dá»¥: username, password, database)
# git cat-file --batch-check --batch-all-objects | grep blob | awk '{print $1}' | while read -r hash;do git cat-file -p $hash;done | grep "username\|password\|db_user\|db_pass"

Git revert
- `git log`

commit e272c0401d735cf4e05b7066c532c4c025b049c3 (HEAD)
Author: dungdungptit <anhdungvk01@gmail.com>
Date:   Sun Dec 8 21:26:15 2024 +0700

    readme

commit 9f35dbc6fdb4c04260be902fa3bc53aaa2de2ba3
Author: dungdungptit <anhdungvk01@gmail.com>
Date:   Sun Dec 8 21:17:55 2024 +0700

    init project
(END)

- `git checkout 9f35dbc6fdb4c04260be902fa3bc53aaa2de2ba3`